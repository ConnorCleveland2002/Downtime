const express=require("express"),routes=require("./controllers"),sequelize=require("./config/connection"),path=require("path"),helpers=require("./utils/helpers"),exphbs=require("express-handlebars"),hbs=exphbs.create({helpers:helpers}),session=require("express-session"),app=express(),PORT=process.env.PORT||3001,SequelizeStore=require("connect-session-sequelize")(session.Store),sess={secret:"Super secret secret",cookie:{expires:6e5},resave:!0,rolling:!0,saveUninitialized:!0,store:new SequelizeStore({db:sequelize})};app.use(session(sess)),app.use(express.json()),app.use(express.urlencoded({extended:!0})),app.use(express.static(path.join(__dirname,"public"))),app.engine("handlebars",hbs.engine),app.set("view engine","handlebars"),app.use(routes),sequelize.sync({force:!1}).then(()=>{app.listen(PORT,()=>console.log("Now listening"))});
